'use strict';(function(){var tips=document.getElementById('J_top-tips');var tipsClose=document.getElementById('J_tips-close');tips.style.display='none';var cookies=getCookie();if(!cookies.tipsHidden){tips.style.display='block';addEventListener(tipsClose,'click',function(){tips.style.display='none';setCookie('tipsHidden',1)})}})();function getCookie(){var cookie={};var all=document.cookie;if(all==='')return cookie;var list=all.split('; ');for(var i=0,len=list.length;i<len;i++){var item=list[i];var p=item.indexOf('=');var name=item.substring(0,p);name=decodeURIComponent(name);var value=item.substring(p+1);value=decodeURIComponent(value);cookie[name]=value}return cookie}function setCookie(name,value,expires,path,domain,secure){var cookie=encodeURIComponent(name)+'='+encodeURIComponent(value);if(expires)cookie+='; expires='+expires.toGMTString();if(path)cookie+='; path='+path;if(domain)cookie+='; domain='+domain;if(secure)cookie+='; secure='+secure;document.cookie=cookie}function removeCookie(name){document.cookie=name+'= '+'; max-age=0'}function ajax(data){var xhr=null;if(window.XMLHttpRequest){xhr=new XMLHttpRequest()}else{xhr=new ActiveXObject("Microsoft.XMLHTTP");}var type=data.type=='get'?'get':'post';var url='';if(data.url){url=data.url}var flag=data.asyn=='true'?'true':'false';xhr.open(type,url,flag);xhr.send(null);xhr.onreadystatechange=function(){if(this.readyState==4){if(this.status==200){data.success(this.responseText);}}}}function addEventListener(el,e,fun){if(el.addEventListener){el.addEventListener(e,fun,false)}else if(el.attachEvent){el.attachEvent('on'+e,fun)}}(function(){var JCourseTabes=document.getElementById('J_course-tabs');var preocutDesin=JCourseTabes.children[0];var proLanguage=JCourseTabes.children[1];var sendData={type:'get',pageNo:1,psize:20,stype:10,asyn:true,url:'//study.163.com/webDev/couresByCategory.htm'+'?pageNo='+1+'&psize='+20+'&type='+10,sendUrl:function(){sendData.url='//study.163.com/webDev/couresByCategory.htm'+'?pageNo='+sendData.pageNo+'&psize='+sendData.psize+'&type='+sendData.stype}}sendData.success=function(datas){var e=JSON.parse(datas)var course=document.getElementById('J_course');course.innerHTML='';for(var i=0;i<e.list.length;i++){var eprice=e.list[i].price==0?'免费':'￥'+e.list[i].price;course.innerHTML+='<li>'+'<img src='+e.list[i].middlePhotoUrl+'>'+'<h3>'+e.list[i].name+'</h3>'+'<span>'+e.list[i].provider+'</span>'+'<i>'+e.list[i].learnerCount+'</i>'+'<em>'+eprice+'</em>'+'</li>'}}ajax(sendData);addEventListener(preocutDesin,'click',function(){preocutDesin.className='select';proLanguage.className='';sendData.pageNo=1;sendData.stype=10;pages(1)()});addEventListener(proLanguage,'click',function(){proLanguage.className='select';preocutDesin.className='';sendData.stype=20;pages(1)()});var page=document.getElementById('J_course_page');var lis=page.getElementsByTagName('li');function pages(i){return function(){sendData.pageNo=i;for(var j=0;j<lis.length;j++){lis[j].className=''}lis[i-1].className='select';sendData.sendUrl();ajax(sendData)}}for(var i=0;i<lis.length;i++){addEventListener(lis[i],'click',pages(i+1))}var prePage=document.getElementById('J_course_prepage');var nextPage=document.getElementById('J_course_nextpage');addEventListener(prePage,'click',function(){if(sendData.pageNo>1){pages(sendData.pageNo-1)()}})nextPage.onselectstart='return false';addEventListener(nextPage,'click',function(){if(sendData.pageNo<lis.length){pages(sendData.pageNo+1)()}})})();!function(){var closelg=document.getElementById("J_close_loginwd");var loginwd=document.getElementById('J_login');var loginbg=document.getElementById('J_loginbg')addEventListener(closelg,'click',function(){loginwd.style.display='none';document.body.style.overflow='auto'})addEventListener(loginbg,'click',function(){document.body.style.overflow='auto';loginwd.style.display='none'})var userName=document.getElementById('userName');var password=document.getElementById('password');var button=document.getElementById('J_login_buttom');var tips=document.getElementById('J_login_validation');addEventListener(userName,'focus',function(event){var e=event||window.event;var target=e.target||e.srcElement;target.value='';});addEventListener(password,'focus',onFocus)function onFocus(event){var e=event||window.event;var target=e.target||e.srcElement;target.value=''}addEventListener(button,'click',function(e){var e=e||window.event;console.log(userName.value);console.log(password.value);var data={type:'get',asyn:true,url:'//study.163.com/webDev/login.htm'+'?userName='+MD5(userName.value)+'&password='+MD5(password.value)}data.success=function(data){if(data==0){tips.innerHTML='账号或密码错误!请重新输入！'}else{tips.innerHTML='';setCookie('loginSuc',1)loginSuccessful();document.body.style.overflow='auto'}};if(userName.value==''){tips.innerHTML='请输入账号!'}else if(password.value==''){tips.innerHTML='请输入密码!'}else{ajax(data)}stopDefault(e)})var attention=document.getElementById('J_attention');var focused=document.getElementById('J_focused');var fans=document.getElementById('J_fans');var cFocuse=focused.getElementsByTagName('span')[0];if(getCookie().loginSuc&&getCookie().followSuc){attentioned()}addEventListener(attention,'click',function(){var cookies=getCookie();if(!cookies.loginSuc){loginwd.style.display='block';document.body.style.overflow='hidden'}else{loginSuccessful()}})function loginSuccessful(){var data={type:'get',asyn:true,url:'http://study.163.com/webDev/attention.htm',};data.success=function(data){if(data==1){attentioned();setCookie('followSuc',1);console.log(data)}}ajax(data)}function attentioned(){attention.style.visibility='hidden';focused.style.display='block';fans.style.marginLeft='60px';loginwd.style.display='none'}addEventListener(cFocuse,'click',function(){attention.style.visibility='visible';focused.style.display='none';fans.style.marginLeft='14px';removeCookie('followSuc')})}();function stopDefault(e){if(e&&e.preventDefault)e.preventDefault();else window.event.returnValue=false;return false}